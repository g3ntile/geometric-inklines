# geometric-inklines
Blender 3d 2.80 addon. Tested up to 4.1 and still works.
It creates and administrates a combo of modifiers, vertex groups and materials to generate geometric inverted hull outlines, and bevel based inner lines to objects, that work in realtime.

## Key features
* creates the outlines material
* creates the inverted hull
* manages the thickness using a vertex map
* you may link the thinkness to a lightsource
* you can update the thickness each frame for animation
* has an opitonal feature for hardsurface inner lines

### Limitations and known issues
* the light based thickness calculation doesn't seem to take deformations into account, so shadows are pre-rig. Seems to be a Blender limitation. You know a way to solve this please tell me.

**Remember this is currently in an eternal beta stage: it works, in some cases it may yield better or worse results, depending on the case. It is as it is.**
[![quick and dirty video demo](https://img.youtube.com/vi/lrTWmnrvjx4/maxresdefault.jpg)](https://youtu.be/lrTWmnrvjx4?si=XJFOpNs0ITbBg-BH)

## INSTALL
This addon works inside Blender 3D 2.80.
You need only OutlineGen.py
Go to Edit -> Preferences -> Add-ons -> Install. Look for the file "OutlineGen.py" and click Install from file.

## USAGE
The outlines generated by this addon relies on:
* a set of at least 2 materials, the last is for the outlines
* a Solidify modifier that makes the outlines
* a Vertex Weight map that lets you control the outlines thickness
* a Bevel modifier that can add inner lines mostly to hardsurface models
When you select a fresh object, this addon offers you button to stramline each one of this features.
**Keep in mind that in order to correctly view the outlines in the viewport you have to enable Backface culling under Shading. When I learn how to enable it with python it will be done automatically when you add an Outline**

### Add outlines materials
Generates the minimum needed materials for lines to work (one main material and one outlines material).
* If the object has at least one material assigned, it creates the outline material and places it in the last material slot.
* If a material named "outlines" already exists in the Blender file, it adds it to material slot at the of the stack.
* If the object already has a material named outlines somwhere in the stack, it adds another anyway at the end. You may want to have many outline mats to modify later. You can assign different outline materials to different parts, relative to each material, and for the outer and inner lines. (<<-- to do: make a tutorial explaining that)

### Generate thickness map
* Right now you have two ways of using this effect
	1. Select just the object and press GENERATE THICKNESS: 
		the thickness will be distributed with the thicker width below and the thinner above, according to world normal, before Armatures and modifiers.
	2. Select a reference light, and then your object: The thickness will be distributed relative to the light (according to angle for Sun lights, and position for all else). 
Right now you should select ONE light and ONE object, last (active object). The map will be applied to the active object based on ONE of the selected lights. I plan to modify that to assign maps to many objects at once,.
* The map generated is completely editable by hand. It's a vertex weight map named "\__thickness\__" (hardcoded in this version)

### Add outline
Adds the Outlines (Solidify modifier). You can adjust it's settings below once applied. The name is hardcoded to "Outline", this name may be editable in future versions. If a Solidify modifier with that name is already present the button will remove the effect instead.
The default material offset is set to 16534, so it will be virtually the last material in the stack. You can modify this to achieve interesting effects (i.e you can have a different outline material for each main material, one after the other, that way you can have differently colored outlines for each mat –a.k.a. disney style–)

### Add inner line
Adds the Inner lines (Bevel modifier). This works better with hard surfaces with sharp edges. For most models the Inner lines Bevel modifier should be AFTER the Outlines in the stack , to avoid some weird artifacts.
The default material offset in this case is 1, to achieve the effect mentioned in Add outline.

